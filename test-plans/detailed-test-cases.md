# 详细测试用例文档

## 1. 用户认证模块详细测试用例

### 1.1 注册功能测试用例

#### TC-AUTH-001: 用户注册成功
**优先级**: P0
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 发送POST请求到 `/api/auth/register`
2. 请求体: `{"phone": "13800138000", "password": "Test123!"}`
3. 验证响应状态码和数据

**预期结果**:
- 状态码: 201
- 响应体包含用户ID和手机号
- 不包含密码字段
- 数据库中存在新用户记录

**实际结果**: [待执行]

#### TC-AUTH-002: 手机号已存在注册失败
**优先级**: P0
**测试类型**: 功能测试、边界测试

**测试步骤**:
1. 使用已存在的手机号注册
2. 发送POST请求到 `/api/auth/register`
3. 请求体: `{"phone": "13800138000", "password": "Test123!"}`

**预期结果**:
- 状态码: 409
- 错误消息: "手机号已注册"
- 数据库用户数量不变

**实际结果**: [待执行]

#### TC-AUTH-003: 手机号格式验证
**优先级**: P1
**测试类型**: 边界测试、白盒测试

**测试步骤**:
1. 发送各种格式的手机号进行注册
2. 包含有效和无效格式
3. 验证Zod schema验证逻辑

**测试数据**:
- 有效: "13800138000", "+8613800138000"
- 无效: "123", "abc", "138001380001234567890"

**预期结果**:
- 有效格式: 注册成功或手机号已存在
- 无效格式: 返回400状态码和验证错误

**实际结果**: [待执行]

### 1.2 登录功能测试用例

#### TC-AUTH-004: 用户登录成功
**优先级**: P0
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 发送POST请求到 `/api/auth/login`
2. 请求体: `{"phone": "13800138000", "password": "Test123!"}`
3. 验证JWT令牌生成

**预期结果**:
- 状态码: 200
- 包含有效的JWT令牌
- 令牌包含用户ID和手机号
- 令牌有效期7天

**实际结果**: [待执行]

#### TC-AUTH-005: 密码错误登录失败
**优先级**: P0
**测试类型**: 功能测试、安全测试

**测试步骤**:
1. 使用错误密码登录
2. 请求体: `{"phone": "13800138000", "password": "WrongPassword"}`
3. 验证安全响应

**预期结果**:
- 状态码: 401
- 错误消息: "手机号或密码错误"
- 不透露具体错误原因（用户不存在或密码错误）

**实际结果**: [待执行]

#### TC-AUTH-006: 用户不存在登录失败
**优先级**: P0
**测试类型**: 功能测试、安全测试

**测试步骤**:
1. 使用不存在的手机号登录
2. 请求体: `{"phone": "19999999999", "password": "Test123!"}`
3. 验证安全响应

**预期结果**:
- 状态码: 401
- 错误消息: "手机号或密码错误"
- 与密码错误返回相同消息

**实际结果**: [待执行]

### 1.3 用户信息获取测试用例

#### TC-AUTH-007: 获取当前用户信息
**优先级**: P1
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 用户登录获取token
2. 发送GET请求到 `/api/auth/me`
3. 在Authorization头中包含Bearer token

**预期结果**:
- 状态码: 200
- 返回当前用户信息
- 不包含敏感信息（密码）

**实际结果**: [待执行]

#### TC-AUTH-008: 无效token获取用户信息失败
**优先级**: P1
**测试类型**: 安全测试、异常测试

**测试步骤**:
1. 使用无效token访问 `/api/auth/me`
2. 包含过期token、错误格式token
3. 验证错误处理

**预期结果**:
- 状态码: 401
- 错误消息: "无效的认证令牌"
- 详细的错误分类

**实际结果**: [待执行]

## 2. 课程管理模块详细测试用例

### 2.1 课程列表获取测试用例

#### TC-COURSE-001: 获取课程列表成功
**优先级**: P0
**测试类型**: 功能测试、性能测试

**测试步骤**:
1. 发送GET请求到 `/api/courses`
2. 验证响应数据和性能
3. 测试不同分页参数

**预期结果**:
- 状态码: 200
- 返回课程数组
- 包含完整的课程信息
- 响应时间 < 200ms

**实际结果**: [待执行]

#### TC-COURSE-002: 课程列表分页功能
**优先级**: P1
**测试类型**: 功能测试、边界测试

**测试步骤**:
1. 测试不同分页参数组合
2. page=1, limit=10
3. page=2, limit=5
4. 超出范围的page参数

**预期结果**:
- 正常参数: 返回对应页面的数据
- 超出范围: 返回空数组或错误处理
- 包含分页元数据

**实际结果**: [待执行]

### 2.2 课程详情查看测试用例

#### TC-COURSE-003: 获取课程详情成功
**优先级**: P0
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 发送GET请求到 `/api/courses/1`
2. 验证课程ID存在
3. 检查返回的数据完整性

**预期结果**:
- 状态码: 200
- 返回课程详细信息
- 包含标题、描述、级别、时长等
- 图片URL格式正确

**实际结果**: [待执行]

#### TC-COURSE-004: 课程不存在详情查看失败
**优先级**: P1
**测试类型**: 功能测试、异常测试

**测试步骤**:
1. 发送GET请求到不存在的课程ID
2. 使用超大ID或负数ID
3. 验证错误处理

**预期结果**:
- 状态码: 404
- 错误消息: "未找到课程"
- 友好的错误提示

**实际结果**: [待执行]

## 3. 社区讨论模块详细测试用例

### 3.1 讨论列表获取测试用例

#### TC-COMMUNITY-001: 获取讨论列表成功
**优先级**: P0
**测试类型**: 功能测试、性能测试

**测试步骤**:
1. 发送GET请求到 `/api/community/discussions`
2. 包含分页参数
3. 验证响应数据和性能

**预期结果**:
- 状态码: 200
- 返回讨论列表和分页信息
- 包含作者信息
- 按创建时间倒序排列

**实际结果**: [待执行]

#### TC-COMMUNITY-002: 讨论列表复杂分页
**优先级**: P1
**测试类型**: 功能测试、边界测试

**测试步骤**:
1. 测试边界分页参数
2. page=0, limit=1000
3. 验证参数验证和限制

**预期结果**:
- 参数自动修正: page最小为1, limit最大为100
- 返回修正后的分页结果
- 防止过度查询

**实际结果**: [待执行]

### 3.2 讨论创建测试用例

#### TC-COMMUNITY-003: 创建讨论成功
**优先级**: P0
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 用户登录获取token
2. 发送POST请求到 `/api/community/discussions`
3. 包含标题和内容
4. 验证权限和业务逻辑

**预期结果**:
- 状态码: 201
- 返回创建的讨论信息
- 包含作者信息
- 数据库新增记录

**实际结果**: [待执行]

#### TC-COMMUNITY-004: 讨论内容验证失败
**优先级**: P1
**测试类型**: 功能测试、边界测试

**测试步骤**:
1. 测试各种边界内容
2. 标题过短/过长
3. 内容为空/超长
4. 特殊字符处理

**预期结果**:
- 验证错误: 返回400状态码
- 详细的字段级错误信息
- 防止无效数据入库

**实际结果**: [待执行]

### 3.3 讨论删除测试用例

#### TC-COMMUNITY-005: 删除讨论成功（作者）
**优先级**: P1
**测试类型**: 功能测试、权限测试

**测试步骤**:
1. 讨论作者登录
2. 发送DELETE请求到 `/api/community/discussions/1`
3. 验证权限和删除逻辑

**预期结果**:
- 状态码: 204
- 讨论从数据库中删除
- 级联删除相关数据

**实际结果**: [待执行]

#### TC-COMMUNITY-006: 非作者删除讨论失败
**优先级**: P1
**测试类型**: 安全测试、权限测试

**测试步骤**:
1. 非讨论作者登录
2. 尝试删除他人讨论
3. 验证权限控制

**预期结果**:
- 状态码: 403
- 错误消息: "无权删除此讨论"
- 讨论数据保持不变

**实际结果**: [待执行]

## 4. 性能测试详细用例

### 4.1 API性能测试用例

#### TC-PERF-001: 课程列表接口性能
**优先级**: P1
**测试类型**: 性能测试、负载测试

**测试步骤**:
1. 使用Artillery进行负载测试
2. 并发用户: 50
3. 持续时间: 5分钟
4. 监控响应时间和错误率

**性能指标**:
- 平均响应时间: < 200ms
- 95%分位响应时间: < 500ms
- 错误率: < 1%
- 吞吐量: > 100请求/秒

**实际结果**: [待执行]

#### TC-PERF-002: 用户登录接口性能
**优先级**: P1
**测试类型**: 性能测试、安全测试

**测试步骤**:
1. 模拟高并发登录场景
2. 测试密码加密性能
3. JWT令牌生成性能

**性能指标**:
- 登录响应时间: < 300ms
- 密码加密时间: < 50ms
- JWT生成时间: < 10ms

**实际结果**: [待执行]

### 4.2 前端性能测试用例

#### TC-PERF-003: 页面加载性能
**优先级**: P1
**测试类型**: 性能测试、用户体验测试

**测试步骤**:
1. 使用Lighthouse进行性能分析
2. 测试不同网络条件下的加载
3. 监控关键性能指标

**性能指标**:
- 首屏加载: < 2秒
- 完全加载: < 5秒
- 首次内容绘制: < 1.5秒
- 最大内容绘制: < 2.5秒

**实际结果**: [待执行]

## 5. 边界条件测试用例

### 5.1 输入边界测试

#### TC-BOUNDARY-001: 手机号边界测试
**优先级**: P2
**测试类型**: 边界测试、白盒测试

**测试数据**:
- 最小长度: "123456"
- 最大长度: "12345678901234567890"
- 特殊字符: "+86-138-0013-8000"

**预期结果**:
- 符合规则: 处理成功
- 超出边界: 验证错误
- 特殊格式: 根据规则处理

**实际结果**: [待执行]

#### TC-BOUNDARY-002: 密码边界测试
**优先级**: P2
**测试类型**: 边界测试、安全测试

**测试数据**:
- 最小长度: "123456"
- 最大长度: 100字符密码
- 特殊字符: 包含各种字符类型

**预期结果**:
- 长度验证正确
- 特殊字符支持
- 加密处理正常

**实际结果**: [待执行]

## 6. 异常场景测试用例

### 6.1 网络异常测试

#### TC-EXCEPTION-001: 网络超时处理
**优先级**: P1
**测试类型**: 异常测试、用户体验测试

**测试步骤**:
1. 模拟网络超时场景
2. 测试前端错误处理
3. 验证用户提示信息

**预期结果**:
- 显示加载状态
- 超时后显示错误提示
- 提供重试机制

**实际结果**: [待执行]

#### TC-EXCEPTION-002: 服务不可用处理
**优先级**: P1
**测试类型**: 异常测试、容错测试

**测试步骤**:
1. 停止后端服务
2. 测试前端容错机制
3. 验证降级方案

**预期结果**:
- 显示服务不可用提示
- 避免页面崩溃
- 提供刷新或重试选项

**实际结果**: [待执行]

### 6.2 数据异常测试

#### TC-EXCEPTION-003: 数据库连接异常
**优先级**: P2
**测试类型**: 异常测试、白盒测试

**测试步骤**:
1. 模拟数据库连接失败
2. 测试错误处理和日志记录
3. 验证API响应

**预期结果**:
- 返回500状态码
- 记录详细错误日志
- 用户友好的错误消息

**实际结果**: [待执行]

---
*测试用例总数: 25个*
*P0优先级: 8个*
*P1优先级: 12个*
*P2优先级: 5个*
## 1. 用户认证模块详细测试用例

### 1.1 注册功能测试用例

#### TC-AUTH-001: 用户注册成功
**优先级**: P0
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 发送POST请求到 `/api/auth/register`
2. 请求体: `{"phone": "13800138000", "password": "Test123!"}`
3. 验证响应状态码和数据

**预期结果**:
- 状态码: 201
- 响应体包含用户ID和手机号
- 不包含密码字段
- 数据库中存在新用户记录

**实际结果**: [待执行]

#### TC-AUTH-002: 手机号已存在注册失败
**优先级**: P0
**测试类型**: 功能测试、边界测试

**测试步骤**:
1. 使用已存在的手机号注册
2. 发送POST请求到 `/api/auth/register`
3. 请求体: `{"phone": "13800138000", "password": "Test123!"}`

**预期结果**:
- 状态码: 409
- 错误消息: "手机号已注册"
- 数据库用户数量不变

**实际结果**: [待执行]

#### TC-AUTH-003: 手机号格式验证
**优先级**: P1
**测试类型**: 边界测试、白盒测试

**测试步骤**:
1. 发送各种格式的手机号进行注册
2. 包含有效和无效格式
3. 验证Zod schema验证逻辑

**测试数据**:
- 有效: "13800138000", "+8613800138000"
- 无效: "123", "abc", "138001380001234567890"

**预期结果**:
- 有效格式: 注册成功或手机号已存在
- 无效格式: 返回400状态码和验证错误

**实际结果**: [待执行]

### 1.2 登录功能测试用例

#### TC-AUTH-004: 用户登录成功
**优先级**: P0
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 发送POST请求到 `/api/auth/login`
2. 请求体: `{"phone": "13800138000", "password": "Test123!"}`
3. 验证JWT令牌生成

**预期结果**:
- 状态码: 200
- 包含有效的JWT令牌
- 令牌包含用户ID和手机号
- 令牌有效期7天

**实际结果**: [待执行]

#### TC-AUTH-005: 密码错误登录失败
**优先级**: P0
**测试类型**: 功能测试、安全测试

**测试步骤**:
1. 使用错误密码登录
2. 请求体: `{"phone": "13800138000", "password": "WrongPassword"}`
3. 验证安全响应

**预期结果**:
- 状态码: 401
- 错误消息: "手机号或密码错误"
- 不透露具体错误原因（用户不存在或密码错误）

**实际结果**: [待执行]

#### TC-AUTH-006: 用户不存在登录失败
**优先级**: P0
**测试类型**: 功能测试、安全测试

**测试步骤**:
1. 使用不存在的手机号登录
2. 请求体: `{"phone": "19999999999", "password": "Test123!"}`
3. 验证安全响应

**预期结果**:
- 状态码: 401
- 错误消息: "手机号或密码错误"
- 与密码错误返回相同消息

**实际结果**: [待执行]

### 1.3 用户信息获取测试用例

#### TC-AUTH-007: 获取当前用户信息
**优先级**: P1
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 用户登录获取token
2. 发送GET请求到 `/api/auth/me`
3. 在Authorization头中包含Bearer token

**预期结果**:
- 状态码: 200
- 返回当前用户信息
- 不包含敏感信息（密码）

**实际结果**: [待执行]

#### TC-AUTH-008: 无效token获取用户信息失败
**优先级**: P1
**测试类型**: 安全测试、异常测试

**测试步骤**:
1. 使用无效token访问 `/api/auth/me`
2. 包含过期token、错误格式token
3. 验证错误处理

**预期结果**:
- 状态码: 401
- 错误消息: "无效的认证令牌"
- 详细的错误分类

**实际结果**: [待执行]

## 2. 课程管理模块详细测试用例

### 2.1 课程列表获取测试用例

#### TC-COURSE-001: 获取课程列表成功
**优先级**: P0
**测试类型**: 功能测试、性能测试

**测试步骤**:
1. 发送GET请求到 `/api/courses`
2. 验证响应数据和性能
3. 测试不同分页参数

**预期结果**:
- 状态码: 200
- 返回课程数组
- 包含完整的课程信息
- 响应时间 < 200ms

**实际结果**: [待执行]

#### TC-COURSE-002: 课程列表分页功能
**优先级**: P1
**测试类型**: 功能测试、边界测试

**测试步骤**:
1. 测试不同分页参数组合
2. page=1, limit=10
3. page=2, limit=5
4. 超出范围的page参数

**预期结果**:
- 正常参数: 返回对应页面的数据
- 超出范围: 返回空数组或错误处理
- 包含分页元数据

**实际结果**: [待执行]

### 2.2 课程详情查看测试用例

#### TC-COURSE-003: 获取课程详情成功
**优先级**: P0
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 发送GET请求到 `/api/courses/1`
2. 验证课程ID存在
3. 检查返回的数据完整性

**预期结果**:
- 状态码: 200
- 返回课程详细信息
- 包含标题、描述、级别、时长等
- 图片URL格式正确

**实际结果**: [待执行]

#### TC-COURSE-004: 课程不存在详情查看失败
**优先级**: P1
**测试类型**: 功能测试、异常测试

**测试步骤**:
1. 发送GET请求到不存在的课程ID
2. 使用超大ID或负数ID
3. 验证错误处理

**预期结果**:
- 状态码: 404
- 错误消息: "未找到课程"
- 友好的错误提示

**实际结果**: [待执行]

## 3. 社区讨论模块详细测试用例

### 3.1 讨论列表获取测试用例

#### TC-COMMUNITY-001: 获取讨论列表成功
**优先级**: P0
**测试类型**: 功能测试、性能测试

**测试步骤**:
1. 发送GET请求到 `/api/community/discussions`
2. 包含分页参数
3. 验证响应数据和性能

**预期结果**:
- 状态码: 200
- 返回讨论列表和分页信息
- 包含作者信息
- 按创建时间倒序排列

**实际结果**: [待执行]

#### TC-COMMUNITY-002: 讨论列表复杂分页
**优先级**: P1
**测试类型**: 功能测试、边界测试

**测试步骤**:
1. 测试边界分页参数
2. page=0, limit=1000
3. 验证参数验证和限制

**预期结果**:
- 参数自动修正: page最小为1, limit最大为100
- 返回修正后的分页结果
- 防止过度查询

**实际结果**: [待执行]

### 3.2 讨论创建测试用例

#### TC-COMMUNITY-003: 创建讨论成功
**优先级**: P0
**测试类型**: 功能测试、白盒测试

**测试步骤**:
1. 用户登录获取token
2. 发送POST请求到 `/api/community/discussions`
3. 包含标题和内容
4. 验证权限和业务逻辑

**预期结果**:
- 状态码: 201
- 返回创建的讨论信息
- 包含作者信息
- 数据库新增记录

**实际结果**: [待执行]

#### TC-COMMUNITY-004: 讨论内容验证失败
**优先级**: P1
**测试类型**: 功能测试、边界测试

**测试步骤**:
1. 测试各种边界内容
2. 标题过短/过长
3. 内容为空/超长
4. 特殊字符处理

**预期结果**:
- 验证错误: 返回400状态码
- 详细的字段级错误信息
- 防止无效数据入库

**实际结果**: [待执行]

### 3.3 讨论删除测试用例

#### TC-COMMUNITY-005: 删除讨论成功（作者）
**优先级**: P1
**测试类型**: 功能测试、权限测试

**测试步骤**:
1. 讨论作者登录
2. 发送DELETE请求到 `/api/community/discussions/1`
3. 验证权限和删除逻辑

**预期结果**:
- 状态码: 204
- 讨论从数据库中删除
- 级联删除相关数据

**实际结果**: [待执行]

#### TC-COMMUNITY-006: 非作者删除讨论失败
**优先级**: P1
**测试类型**: 安全测试、权限测试

**测试步骤**:
1. 非讨论作者登录
2. 尝试删除他人讨论
3. 验证权限控制

**预期结果**:
- 状态码: 403
- 错误消息: "无权删除此讨论"
- 讨论数据保持不变

**实际结果**: [待执行]

## 4. 性能测试详细用例

### 4.1 API性能测试用例

#### TC-PERF-001: 课程列表接口性能
**优先级**: P1
**测试类型**: 性能测试、负载测试

**测试步骤**:
1. 使用Artillery进行负载测试
2. 并发用户: 50
3. 持续时间: 5分钟
4. 监控响应时间和错误率

**性能指标**:
- 平均响应时间: < 200ms
- 95%分位响应时间: < 500ms
- 错误率: < 1%
- 吞吐量: > 100请求/秒

**实际结果**: [待执行]

#### TC-PERF-002: 用户登录接口性能
**优先级**: P1
**测试类型**: 性能测试、安全测试

**测试步骤**:
1. 模拟高并发登录场景
2. 测试密码加密性能
3. JWT令牌生成性能

**性能指标**:
- 登录响应时间: < 300ms
- 密码加密时间: < 50ms
- JWT生成时间: < 10ms

**实际结果**: [待执行]

### 4.2 前端性能测试用例

#### TC-PERF-003: 页面加载性能
**优先级**: P1
**测试类型**: 性能测试、用户体验测试

**测试步骤**:
1. 使用Lighthouse进行性能分析
2. 测试不同网络条件下的加载
3. 监控关键性能指标

**性能指标**:
- 首屏加载: < 2秒
- 完全加载: < 5秒
- 首次内容绘制: < 1.5秒
- 最大内容绘制: < 2.5秒

**实际结果**: [待执行]

## 5. 边界条件测试用例

### 5.1 输入边界测试

#### TC-BOUNDARY-001: 手机号边界测试
**优先级**: P2
**测试类型**: 边界测试、白盒测试

**测试数据**:
- 最小长度: "123456"
- 最大长度: "12345678901234567890"
- 特殊字符: "+86-138-0013-8000"

**预期结果**:
- 符合规则: 处理成功
- 超出边界: 验证错误
- 特殊格式: 根据规则处理

**实际结果**: [待执行]

#### TC-BOUNDARY-002: 密码边界测试
**优先级**: P2
**测试类型**: 边界测试、安全测试

**测试数据**:
- 最小长度: "123456"
- 最大长度: 100字符密码
- 特殊字符: 包含各种字符类型

**预期结果**:
- 长度验证正确
- 特殊字符支持
- 加密处理正常

**实际结果**: [待执行]

## 6. 异常场景测试用例

### 6.1 网络异常测试

#### TC-EXCEPTION-001: 网络超时处理
**优先级**: P1
**测试类型**: 异常测试、用户体验测试

**测试步骤**:
1. 模拟网络超时场景
2. 测试前端错误处理
3. 验证用户提示信息

**预期结果**:
- 显示加载状态
- 超时后显示错误提示
- 提供重试机制

**实际结果**: [待执行]

#### TC-EXCEPTION-002: 服务不可用处理
**优先级**: P1
**测试类型**: 异常测试、容错测试

**测试步骤**:
1. 停止后端服务
2. 测试前端容错机制
3. 验证降级方案

**预期结果**:
- 显示服务不可用提示
- 避免页面崩溃
- 提供刷新或重试选项

**实际结果**: [待执行]

### 6.2 数据异常测试

#### TC-EXCEPTION-003: 数据库连接异常
**优先级**: P2
**测试类型**: 异常测试、白盒测试

**测试步骤**:
1. 模拟数据库连接失败
2. 测试错误处理和日志记录
3. 验证API响应

**预期结果**:
- 返回500状态码
- 记录详细错误日志
- 用户友好的错误消息

**实际结果**: [待执行]

---
*测试用例总数: 25个*
*P0优先级: 8个*
*P1优先级: 12个*
*P2优先级: 5个*